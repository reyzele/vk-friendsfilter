!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";if(n.r(t),VK){const e=function(){var e=document.querySelector("#allFriends"),t=document.querySelector("#saveFriends");const n=document.querySelector("#saveButton"),r=JSON.parse(localStorage.savedFriends||"{}");let i=[],o=[];function s(e,t){const n=document.querySelector("#user-template").innerHTML,r=Handlebars.compile(n)({items:t});e.innerHTML=r}return n.addEventListener("click",e=>{const n=document.querySelector(".status-overlay"),r=document.querySelector(".status"),i=document.querySelector("#overlay-close"),o=[];t.childNodes.forEach(e=>{e.id&&o.push(e.id)}),localStorage.savedFriends=JSON.stringify(o||"{}"),n.style.display="block",r.innerHTML="Список друзей сохранен. Длинна списка: "+o.length,i.addEventListener("click",e=>{n.style.display="none"})}),VK.init({apiId:6494066}),(async()=>{try{await new Promise((e,t)=>{VK.Auth.login(n=>{n.session?e():t(new Error("Не удалось авторизоваться"))},2)});const n=await function(e,t){return t.v="5.76",new Promise((e,n)=>{VK.api("friends.get",t,t=>{t.error?n(t.error):e(t.response)})})}(0,{fields:"photo_50"});r.length?(n.items.forEach(e=>{r.includes("id_"+e.id)?o.push(e):i.push(e)}),s(t,o)):i=n.items,s(e,i)}catch(e){console.error(e)}})(),{source:e,target:t}}();!function({source:e,target:t},{filterMapDnd:n,filterMapClick:r}){function i(e){if(e.preventDefault(),a){let t=e.target;if(t.classList.contains("friends__list"))this.appendChild(a);else{for(;"LI"!==t.tagName;)t=t.parentNode;this.insertBefore(a,t.nextElementSibling)}a.classList.remove("dragged"),a=null,n.get(this).dispatchEvent(new Event("keyup"))}}function o(e){e.target instanceof Element&&e.target.classList.contains("friends__item")?(a=e.target).classList.add("dragged"):e.preventDefault()}function s(e){e.preventDefault()}var a;[e,t].forEach(n=>{n.addEventListener("dragstart",o),n.addEventListener("dragenter",s),n.addEventListener("dragover",s),n.addEventListener("drop",i),n.addEventListener("click",function(n){if(n.target.classList.contains("fa-times")){let i=function(e){do{if(e.classList.contains("friends__item"))return e}while(e=e.parentElement);return null}(n.target);this===e?t.appendChild(i):e.appendChild(i),r.get(this).dispatchEvent(new Event("keyup"))}})})}(e,function({source:e,target:t}){function n(n){let o;n.target===r?o=e:n.target===i&&(o=t),function(e,t){o.querySelectorAll(".friends__name").forEach(t=>{let n=t;for(;!n.classList.contains("friends__item");)n=n.parentNode;e?(n.classList.add("hidden"),function(e,t){let n=e.toLowerCase(),r=t.toLowerCase();return!!t&&n.includes(r)}(t.textContent,e)&&n.classList.remove("hidden")):n.classList.remove("hidden")})}(n.target.value)}const r=document.querySelector("#friendInput"),i=document.querySelector("#listInput");let o=new Map,s=new Map;return[r,i].forEach(e=>{e.addEventListener("keyup",n)}),o.set(e,r),o.set(t,i),s.set(t,r),s.set(e,i),{filterMapDnd:o,filterMapClick:s}}(e))}}]);